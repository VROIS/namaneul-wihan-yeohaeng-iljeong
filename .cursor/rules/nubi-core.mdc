---
description: NUBI 프로젝트 핵심 규칙 - 모든 AI 세션에 자동 적용
alwaysApply: true
---

# NUBI 핵심 규칙

## 프로젝트 개요
- **NUBI**: 한국인 대상 유럽 여행 일정 생성 앱 (React Native Expo + Express + Supabase PostgreSQL)
- **핵심 차별화**: 한국인 선호 데이터 기반 일정 + 정밀 교통비 산정 + 드라이빙 가이드 예약
- **배포 URL**: https://legal-dannye-dbstour-4e6b86d5.koyeb.app
- **브랜치**: cursor-dev

## 자율 실행 프로토콜 (매 작업 시 반드시 따를 것)
```
사용자 요구 → [1]접수·파악 → [2]계획 수립 → [3]구현 → [4]자체 테스트(빌드+린트)
→ [5]오류 수정 → [6]커밋·배포(cursor-dev) → [7]배포본 실제 테스트
→ [8]결과 판정 → 실패시 [3]으로 무한 반복 → 성공시 [9]결과 보고
→ [10]사용자 테스트 → [11]피드백 반영 → [12]문서 업데이트
```
- 사용자는 "뭘 할지"만 말함 → 나머지 AI가 100% 자율 실행
- 실패하면 물어보지 말고 고쳐서 다시 돌림 (성공까지 반복)
- 핵심 파일 수정 시에만 사용자 확인 요청

## 필수 규칙
1. **한국어 응답** + 기술 용어 쉽게 설명
2. **배포 프로세스**: 코드 수정 → git commit (cursor-dev) → Koyeb 자동 배포 → 배포본에서 검증
3. **로컬 서버 실행 금지** (localhost 사용 안 함, Supabase 원격 DB만 사용)
4. **새 .md 파일 생성 금지** (기존 문서에 추가)
5. **세션 시작**: `nubi-handoff.mdc` 읽기 → 상태 파악 → 작업 이어가기
6. **세션 종료**: `nubi-handoff.mdc` 업데이트 (마지막 작업, 다음 할 일, 주의사항)
7. **보고 형식**: "완료: [작업] / 결과: [수치] / 다음: [다음작업]"

## 핵심 파일 보호 (명시적 요청 없이 수정 금지)
- `shared/schema.ts` — DB 스키마 (변경시 데이터 손실 위험)
- `server/db.ts` — DB 연결 설정
- `server/index.ts` — 서버 진입점

## 참조 문서
- `docs/TASK.md` — 현재 작업 현황 + 진행 예정
- `docs/TASK_ARCHIVE.md` — 완료된 작업 이력
- `docs/PRD.md`, `docs/TRD.md`, `docs/NUBI_WHITEPAPER.md` — 핵심 설계 (수정 금지)

# 📝 Phase E - 감동 영상 구현 기록

> **최종 업데이트: 2026-01-25 (토) 04:08**

---

## 🎯 프로젝트 개요

- **목표**: NUBI 앱의 차별화 포인트 - 개인화된 여행 미리보기 영상 자동 생성
- **대상**: 유료 회원 또는 관리자 요청
- **출력**: 일별 1분 영상 + 전체 영상 (모바일 9:16 포맷)

---

## ✅ 완료된 작업 로그

### 2026-01-25 (토) - Remotion 시뮬레이션 성공

#### 1. 환경 설정
| 작업 | 상태 | 명령어 |
|------|------|--------|
| Remotion Skills 설치 | ✅ | `npx skills add remotion-dev/skills` |
| Remotion 패키지 설치 | ✅ | `npm install remotion @remotion/cli @remotion/bundler` |
| Remotion 설정 파일 생성 | ✅ | `remotion.config.ts` |

#### 2. 캐릭터 시스템
| 캐릭터 | 연령대 | 스타일 | 상태 |
|--------|--------|--------|------|
| M1 남아 | 5-9세 | 지블리 스타일 | ✅ |
| F1 여아 | 5-9세 | 지블리 스타일 | ✅ |
| M2 청소년 남성 | 13-17세 | 지블리 스타일 | ✅ |
| F2 청소년 여성 | 13-17세 | 지블리 스타일 | ✅ |
| M3 20대 남성 | 20대 | 지블리 스타일 | ✅ |
| F3 20대 여성 | 20대 | 지블리 스타일 | ✅ |
| M4 30대 남성 | 30대 | 세련된 유럽 여행자 | ✅ |
| F5 50대 여성 | 50대 | 우아한 유럽 여행자 | ✅ |
| M7 60대+ 남성 | 60대+ | 품격 있는 여행자 | ✅ |
| F7 60대+ 여성 | 60대+ | 우아한 여행자 | ✅ |

**특징**:
- 모든 캐릭터: Studio Ghibli 스타일, 한국인, 유럽 여행 복장
- 투명 배경 (합성 용이)
- 전신 스탠딩 포즈

#### 3. Remotion 컴포넌트

**Root.tsx** - 컴포지션 설정
```typescript
width={1080}    // 모바일 세로
height={1920}   // 9:16 비율
fps={30}
durationInFrames={300}  // 10초
```

**TravelScene.tsx** - 메인 씬
- Ken Burns 효과 (배경 천천히 줌인)
- 캐릭터 호흡 애니메이션 (미세 상하 움직임)
- 캐릭터 등장 애니메이션 (spring 효과)
- 대사 표시 (2초 후 페이드인)
- 장소 정보 오버레이

#### 4. 시뮬레이션 테스트
- **Remotion Studio**: http://localhost:3001 에서 실행 성공
- **테스트 씬**: 에펠탑 배경 + 3명 캐릭터 (M4, F5, M7) + 한국어 대사

---

## 📋 다음 작업 (우선순위)

### 🔴 높음 (이번 주)
- [ ] 나머지 캐릭터 4명 생성 (M5, M6, F4, F6)
- [ ] mp4 렌더링 테스트 (`npm run remotion:render`)
- [ ] 렌더링 결과물 품질 확인

### 🟡 중간 (다음 주)
- [ ] TTS 음성 연동
- [ ] API 엔드포인트 구현
- [ ] itineraries 테이블 확장 (videoUrl 컬럼)

### 🟢 낮음 (향후)
- [ ] React Native 연동 (expo-video)
- [ ] 관리자 대시보드 "영상 생성" 버튼 추가
- [ ] 영상 저장소 설정 (S3/R2)

---

## 🛠️ 기술 스택

| 구성 요소 | 기술 | 버전 |
|----------|------|------|
| 영상 렌더링 | Remotion | 4.0.409 |
| 캐릭터 애니메이션 | 예정: Seedance 1.5 Pro | - |
| 대사 생성 | Gemini | 3.0 |
| 프론트엔드 | React Native (Expo) | - |
| 백엔드 | Express | - |

---

## 📁 파일 구조

```
travel-preview/
├── src/
│   └── remotion/
│       ├── Root.tsx          # 컴포지션 설정
│       ├── TravelScene.tsx   # 메인 씬 컴포넌트
│       └── index.tsx         # 엔트리포인트
├── public/
│   ├── characters/           # 캐릭터 이미지 10개
│   │   ├── char_m1_boy_child_*.png
│   │   ├── char_f1_girl_child_*.png
│   │   └── ...
│   └── scene_*.png           # 합성 장면 이미지
├── remotion.config.ts        # Remotion CLI 설정
└── package.json              # 스크립트 포함
```

---

## 📌 핵심 결정 사항

1. **화면 비율**: 9:16 (모바일 세로) - 1080x1920
2. **영상 길이**: 일별 1분, 전체 N분 (일수에 비례)
3. **클립 수**: travelPace에 따라 4/6/8개
4. **캐릭터 스타일**: Studio Ghibli, 따뜻하고 세련된 느낌
5. **대상**: 유료 회원 또는 관리자 수동 트리거
